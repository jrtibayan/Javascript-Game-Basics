<!DOCTYPE html>
<!-- 
	
	DETAILS OF THIS COMMIT

	Added button to control the character
	Added function accelerate that will change value of the character gravity property
	If the button is pressed, accelerate will pass a negative value for gravity and will make object go up
	And when button is released, the accelerate will pass a possitive value for gravity and make the object go down\
	A clear function was added to myGameArea since we are drawing over and over to the canvas,
		we need to clear the canvas so the past object drawn will be erased
	    and then draw new one to make the object seem moving
	Added some more variable to the component function which is speedY, gravity and gravitySpeed
		every object should have its own speed when going up or down and here that is speedY
		for now speedY is 0 since right now we only make the character go up and down using gravity
		speedY use case in the future may be for example you get a power up and make you move faster
		gravity is fixed and will increament to gravitySpeed making it faster and faster over time
	Added function to change the coordinates of an object so that its on the new position when it draw a new one
	
-->
<html>
	<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<style>
			canvas {
				border:1px solid #d3d3d3;
				background-color: #f1f1f1;
			}
		</style>
	</head>
	<body onload="startGame()">
	
		<script>
		
			function startGame() {
				myGamePiece = new component(30, 30, "red", 10, 120); // create my character object
				myGameArea.start();
			}

			var myGameArea = {
				canvas : document.createElement("canvas"), // this will create a canvas that will be inserted later to the html body
				start : function() {
					this.canvas.width = 480; // set the width and height of the canvas before it is appended to the body
					this.canvas.height = 270;
					this.context = this.canvas.getContext("2d");
					document.body.insertBefore(this.canvas, document.body.childNodes[0]); // append the canvas to the body
					this.frameNo = 0; // keep track of frame no
					this.interval = setInterval(updateGameArea, 20); // continuously run updateGameArea function
				},
				clear : function() { // clears the entire canvas
					this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
				}
			}
			
			// this will be used to create the character and other objects
			// each will have their own properties like x and y position, color and size of width and height
			// it will also let the objects draw themselves with the update function and change their position with the
			function component(width, height, color, x, y) {
			
				this.width = width;
				this.height = height;
				this.x = x;
				this.y = y;
				
				this.speedY = 0; // the speed of object going up and down
				
				this.gravity = 0; // the amount to be increased to gravitySpeed
				this.gravitySpeed = 0; // the amount to be added to get new y coordinate
				
				// draw the object
				this.update = function() {
					ctx = myGameArea.context;
					ctx.fillStyle = color;
					ctx.fillRect(this.x, this.y, this.width, this.height);
				}
				
				this.newPos = function() {
					this.gravitySpeed += this.gravity; // gravitySpeed will go faster and faster when button is pressed
					this.y += this.speedY + this.gravitySpeed; // new y position depends on how fast speedY is and the gravity
				}
				
			}
			
			function updateGameArea() {
				
				myGameArea.clear(); // clear everything first before start to draw again
				myGameArea.frameNo += 1;
				
				if (myGameArea.frameNo === 1) { // only update if this is true
					x = myGameArea.canvas.width;
					width = 10; // width of the obstackles
					minHeight = 20; // min height of top obstacle
					minGap = 50; // min height of gap
					maxGap = 100; // max height of gap
					gap = Math.floor(Math.random()*(maxGap-minGap+1)+minGap); // generate random number from minGap to maxGap to be used as the height of the gap
					maxHeight = myGameArea.canvas.height-gap-minHeight; // compute for max height the top obstacle is allowed to have
					height = Math.floor(Math.random()*(maxHeight-minHeight+1)+minHeight); // generate random number from minHeight to maxHeight
					
					myObstacles1 = new component(width, height, "green", 150, 0); // create top obstacle object
					myObstacles2 = new component(width, myGameArea.canvas.height-height-gap, "blue", 150, height+gap); // create bottom obstacle object
					myObstacles1.update(); // draw the obstacle
					myObstacles2.update();
				}
				
				myGamePiece.newPos(); // update the position of x since it may have changed due to gravity
				myGamePiece.update();
				
			}
			
			// this tells the character to move up or down
			// if the accelleration is negative then the item will go up and down if its possitive
			function accelerate(n) {
				myGamePiece.gravity = n;
			}
			
		</script>
		
		<br>
		<!-- the button below will execute accelerate function making the item move either up or down -->
		<button onmousedown="accelerate(-0.2)" onmouseup="accelerate(0.05)">ACCELERATE</button>
		<p>Use the ACCELERATE button to stay in the air</p>
		<p>How long can you stay alive?</p>
		
	</body>
</html>